<!DOCTYPE html>
<html lang="en">
<head>
<%- include("../partials/head.ejs")%>
<link rel="stylesheet" href="/css/winbox.css">
</head>


<body>
    <div class="desktop-center" style="opacity: 0.50;"><img src="/assets/img/Emoji.svg" alt="Grape Emoji" width="100"
            height="100"><span class="sp-subbrand">Powered By</span><span class="sp-brand">&lt;grapeOS/&gt;</span>
    </div>
    <p class="text-center p-2"
        style="position: absolute;bottom: 50px;right: 15px;color: rgb(200,200,200,0.3);border: 1px solid rgb(200,200,200,0.3);">
        [ WARNING ]<br>Site still in development<br>Expect errors!</p>
    <div class="navbar-bottom"><img class="taskbar-start" src="/assets/img/Emoji.svg" alt="Grape Emoji" style="filter: brightness(95%) grayscale(100%);">
        <div class="taskbar-right"><img id="spotify" src="/assets/img/akar-icons_spotify-fill.svg" style="cursor: pointer;" alt="Spotify"><img
                src="/assets/img/vs_profile.svg" alt="Profile">
            <div class="taskbar-timedate text-light"><span id="time"></span><span id="date"></span></div>
        </div>
    </div>
    <div class="container-fluid text-light">
        <div class="row">
            <div class="col-4">
                <div class="d-inline-flex flex-column align-items-center" id=""></div>
                <% scs.forEach(sc => {%>
                    <div class="d-inline-flex flex-column align-items-center p-2" id="<%=sc._id%>" style="cursor: pointer;"><i
                        class="<%=sc.icon.data.iconTypeData%>" style="font-size: 3rem"></i><span
                        class="text-nowrap "><%=sc.name%></span></div>
                <%});%>
                
                
            </div>
        </div>
    </div>
    <script src="/assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/winbox.bundle.js"></script>
    <script src="/js/clock.js"></script>
    <script src="/js/spotify.js"></script>
    <script>
        

        console.log(<%-JSON.stringify(scs)%>);
        function _myFunc(opts) {
            const box = winBox({opts});
        }
        const winBox = (opts) => {
            const defaultOpts = {
                onfocus: function () {
                    if (window.screen.width < this.width) {
                        this.maximize(true);
                    }
                },

                onblur: function () {
                    if (window.screen.width < this.width) {
                        this.close();
                    }
                },
            };
            let allOpts = Object.assign({}, opts, defaultOpts);
            //console.log(allOpts);
            return new WinBox(allOpts);
        };
        <% scs.forEach(sc => {%>
            document.getElementById("<%=sc._id%>").addEventListener("click", () => {
            const box = winBox(<%-JSON.stringify(sc.data.winbox)%>);
        });
        <%})%>
        
    </script>
</body>

</html>